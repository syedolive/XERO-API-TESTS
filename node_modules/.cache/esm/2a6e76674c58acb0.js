let xero,Invoice,client,db;_4c5‍.w("../xero_client/client",[["default",["xero"],function(v){xero=v}]]);_4c5‍.w("xero-node",[["Invoice",["Invoice"],function(v){Invoice=v}]]);_4c5‍.w("../database/mongo",[["default",["client"],function(v){client=v}],["db",["db"],function(v){db=v}]]);var express = require('express');
var router = express.Router();




/* GET home page. */
router.get('/', async (req, res, next) => {
  client.connect(async err => {
    if(err){
      res.send('error: mongo not connected');
    }
   try{
    const tokenSet = await xero.getClientCredentialsToken();
    await xero.setTokenSet(tokenSet);
    // const collection = db.collection('auth_token');
    // const insertToDb = await collection.insertOne(tokenSet);
    res.send(tokenSet);
   }catch(e){
     throw e;
   }
    
  })
});

module.exports = router;

